(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/articleDetail/articleDetail"],{"3e9d":function(e,t,n){},5948:function(e,t,n){"use strict";var r=n("3e9d"),a=n.n(r);a.a},"6a7e":function(e,t,n){"use strict";n.r(t);var r=n("ced0"),a=n.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(u);t["default"]=a.a},ba42:function(e,t,n){"use strict";n.r(t);var r=n("c609"),a=n("6a7e");for(var u in a)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(u);n("5948");var i=n("f0c5"),o=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=o.exports},c609:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return r}));var r={uParse:function(){return Promise.all([n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(n.bind(null,"6f4a"))},CommentBox:function(){return n.e("components/CommentBox/CommentBox").then(n.bind(null,"2733"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"515d"))},SaveLikes:function(){return n.e("components/SaveLikes/SaveLikes").then(n.bind(null,"59fb"))},CommentMasker:function(){return n.e("components/CommentMasker/CommentMasker").then(n.bind(null,"ded7"))}},a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showPopup=t})},u=[]},ced0:function(e,t,n){"use strict";(function(e){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("2eee")),u=r(n("448a")),i=r(n("9523")),o=r(n("c973")),c=n("43e3");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={onLoad:function(){this.articleData=this.$Router.currentRoute.query,this._getrticleDetail(),this._getCommentList()},data:function(){return{articleData:null,showPopup:!1,commentList:[],replyData:{},haveNoComment:!1}},components:{uParse:function(){Promise.all([n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(function(){return resolve(n("6f4a"))}.bind(null,n)).catch(n.oe)}},computed:{content:function(){try{return(0,c.marked)(this.articleData.content)}catch(e){return null}},isFollowAuthor:function(){try{return this.userInfo&&this.userInfo.author_likes_ids.includes(this.articleData.author.id)}catch(e){return!1}},isCompliments:function(){try{return this.userInfo&&this.userInfo.thumbs_up_article_ids.includes(this.articleData._id)}catch(e){return!1}}},methods:{_getrticleDetail:function(){var e=this;return(0,o.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get_article_detail({article_id:e.articleData._id});case 2:n=t.sent,e.articleData=n;case 4:case"end":return t.stop()}}),t)})))()},openCommentMasker:function(){var e=this;return(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkedLogin();case 2:e.showPopup=!0;case 3:case"end":return t.stop()}}),t)})))()},_sendCommentData:function(t){var n=this;return(0,o.default)(a.default.mark((function r(){var u,i;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$http.update_comment(l({userId:n.userInfo._id,articleId:n.articleData._id,comment:t},n.replyData));case 2:u=r.sent,i=u.msg,e.showToast({title:i,icon:"success"}),n.showPopup=!1,n.replyData={},n._getCommentList();case 8:case"end":return r.stop()}}),r)})))()},_getCommentList:function(){var e=this;return(0,o.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get_comment({articleId:e.articleData._id});case 2:n=t.sent,n.length?e.haveNoComment=!1:e.haveNoComment=!0,e.commentList=n;case 6:case"end":return t.stop()}}),t)})))()},commentReply:function(e){var t=this;return(0,o.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.replyData={comment_id:e.comment.comment_id,is_reply:e.isReply},e.comment.reply_id&&(t.replyData.reply_id=e.comment.reply_id),t.openCommentMasker();case 3:case"end":return n.stop()}}),n)})))()},_followAuthor:function(){var t=this;return(0,o.default)(a.default.mark((function n(){var r,i,o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.checkedLogin();case 2:return n.next=4,t.$http.update_follow_author({authorId:t.articleData.author.id,userId:t.userInfo._id});case 4:r=n.sent,i=r.msg,e.showToast({title:i,icon:"none"}),o=(0,u.default)(t.userInfo.author_likes_ids),o.includes(t.articleData.author.id)?o=o.filter((function(e){return e!==t.articleData.author.id})):o.push(t.articleData.author.id),t.updateUserInfo(l(l({},t.userInfo),{},{author_likes_ids:o})),e.$emit("updateAuthor");case 12:case"end":return n.stop()}}),n)})))()},_updateCompliments:function(){var t=this;return(0,o.default)(a.default.mark((function n(){var r,i,o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.checkedLogin();case 2:return n.next=4,t.$http.update_compliments({articleId:t.articleData._id,userId:t.userInfo._id});case 4:r=n.sent,i=r.msg,e.showToast({title:i,icon:"none"}),o=(0,u.default)(t.userInfo.thumbs_up_article_ids),o.includes(t.articleData._id)?(o=o.filter((function(e){return e!==t.articleData._id})),t.articleData.thumbs_up_count-=1):(o.push(t.articleData._id),t.articleData.thumbs_up_count+=1),t.updateUserInfo(l(l({},t.userInfo),{},{thumbs_up_article_ids:o}));case 11:case"end":return n.stop()}}),n)})))()},goCommentPage:function(){e.navigateTo({url:"/pages/commentList/commentList?id=".concat(this.articleData._id)})}}};t.default=d}).call(this,n("543d")["default"])},f50e:function(e,t,n){"use strict";(function(e,t){var r=n("4ea4");n("2582"),n("a9ff");r(n("66fd"));var a=r(n("ba42"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["f50e","common/runtime","common/vendor"]]]);